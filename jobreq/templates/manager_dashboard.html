{% extends 'manager_base.html' %}
{% load static %}
{% block main %}


        <!-- page content -->
        <div class="right_col" role="main">

          <div class="row mb-3">
            <div class="col-md-3">
              <div class="card-base">
                <div class="card-icon">
                  <span title="All Requisitions" class="imagecard widgetCardIcon">
                    <i class="fa fa-database"></i>
                  </span>
                  <div class="card-data widgetCardData">
                    <h2 class="box-title mt-5" style="color: #2A3F54;">All Requisitions</h2>
                    <h1>{{all}}</h1>
                    <a href="/erf/job-requisition-table/all" title="Style Builder" class="anchor btn btn-default" style="background: #1ABB9C; color: #fff;">
                      View
                    </a>
                  </div>
                </div>
                <div class="space"></div>
              </div>
            </div>
            <div class="col-md-3">
              <div class="card-base">
                <div class="card-icon">
                  <span title="Open Requisitions" class="imagecard widgetCardIcon">
                    <i class="fa fa-user-times"></i>
                  </span>
                  <div class="card-data widgetCardData">
                    <h2 class="box-title mt-5" style="color: #2A3F54;">Open Requisitions</h2>
                    <h1>{{open}}</h1>
                    <a href="/erf/job-requisition-table/open" title="Style Builder" class="anchor btn btn-default" style="background: #1ABB9C; color: #fff;">
                      View
                    </a>
                  </div>
                </div>
                <div class="space"></div>
              </div>
            </div>
            <div class="col-md-3">
              <div class="card-base">
                <div class="card-icon">
                  <span title="Closed Requisitions" class="imagecard widgetCardIcon">
                    <i class="fa fa-thumbs-up"></i>
                  </span>
                  <div class="card-data widgetCardData">
                    <h2 class="box-title mt-5" style="color: #2A3F54;">Completed Requisitions</h2>
                    <h1>{{closed}}</h1>
                    <a href="/erf/job-requisition-table/closed" title="Style Builder" class="anchor btn btn-default" style="background: #1ABB9C; color: #fff;">
                      View
                    </a>
                  </div>
                </div>
                <div class="space"></div>
              </div>
            </div>
            <div class="col-md-3">
              <div class="card-base">
                <div class="card-icon">
                  <span title="Crossed Deadline" class="imagecard widgetCardIcon">
                    <i class="fa fa-exclamation-triangle"></i>
                  </span>
                  <div class="card-data widgetCardData">
                    <h2 class="box-title mt-5" style="color: #2A3F54;">Crossed Deadline</h2>
                    <h1>{{dead_line}}</h1>
                    <a href="/erf/job-requisition-table/dead-line" title="Style Builder" class="anchor btn btn-default" style="background: #1ABB9C; color: #fff;">
                      View
                    </a>
                  </div>
                </div>
                <div class="space"></div>
              </div>
            </div>

          </div>

            <div class="row mt-3">
              {% if request.user.profile.emp_desi in manager %}
              <div class="col-md-3">
                <div class="card-base">
                  <div class="card-icon">
                    <span title="Crossed Deadline" class="imagecard widgetCardIcon">
                      <i class="fa fa-check"></i>
                    </span>
                    <div class="card-data widgetCardData">
                      <h2 class="box-title mt-5" style="color: #2A3F54;">Approval Requests</h2>
                      <h1>{{approval}}</h1>
                      <a href="/erf/job-requisition-table/approval" title="Style Builder" class="anchor btn btn-default" style="background: #1ABB9C; color: #fff;">
                        View
                      </a>
                    </div>
                  </div>
                  <div class="space"></div>
                </div>
              </div>
              {% endif %}
              <div class="col-md-4">
                <div class="card">
                  <div class="card-header">
                    <h5>Reports</h5>
                  </div>
                  <div class="card-body">
                    <div class="row">
                      <form action="/erf/job-requisition-table/range" method="POST" enctype="multipart/form-data">
                        {% csrf_token %}
                        <div class="col-md-12">
                          <div class="row">
                            <div class="col-md-12">
                              <div class="form-group">
                                <label for="report_status">Status</label>
                                <select required class="form-control select2" name="status" id="report_status">
                                  <option value="" selected disabled>Please Select</option>
                                  <option value="all">All</option>
                                  <option value="open">Open Status</option>
                                  <option value="closed">Completed Status</option>
                                </select>
                              </div>
                            </div>
                          </div>
                        </div>
                        <div class="col-md-12">
                          <div class="row">
                            <div class="col-md-6">
                              <div class="form-group">
                                <label for="cam_start">Start Date</label>
                                <input type="date" onchange="cam_end_datefn()" name="start_date" required id="cam_start" class="form-control start">
                              </div>
                            </div>
                            <div class="col-md-6">
                              <div class="form-group">
                                <label for="cam_end">End Date</label>
                                <input type="date"  name="end_date" id="cam_end" required class="form-control end">
                              </div>
                            </div>
                          </div>
                        </div>
                        <div class="col-md-12">
                          <button class="btn btn-success form-control">Submit</button>
                        </div>
                      </form>
                    </div>
                  </div>
                </div>
              </div>
            </div>

        </div>
        <!-- /page content -->

{% endblock %}

{% block scripts %}
<script>

  $today = new Date();
  $today = moment($today).format("YYYY-MM-DD");

  $cam_start = $("#cam_start");
  $cam_end = $("#cam_end");
  $cam_start.attr("max",$today)
  $cam_end.attr("max",$today)
  function cam_end_datefn(){
    $cam_start = $("#cam_start").val()
    $cam_end.attr("min",$cam_start)
    $cam_end.attr("required","required")
  }


  $start = $("#start");
  $end = $("#end");
  $start.attr("max",$today)
  $end.attr("max",$today)
  function end_datefn(){
    $start = $("#start").val()
    $end.attr("min",$start)
    $end.attr("required","required")
  }

</script>
{% endblock %}